<%- include ('partials/header.ejs') %> <%- include ('partials/headerNav.ejs') %>
<div class="main-content">
    <div class="container-fluid h-100">
        <div class="card-deck h-100">
            <div class="card bg-dark my-3 shadow-lg">
                <div class="card-body d-flex flex-column text-white">
                    <h4 class="card-title text-center">
                        <a href="#" class="text-white">Profile</a>
                        <hr />
                    </h4>

                    <div class="card-text col-sm-6 mx-auto">
                        <div class="text-center">
                            <% if (message) { %>
                            <small><span class="alert alert-secondary"><%= message %></span></small>
                            <% } %>
                        </div>
                        <ul class="mt-4 nav nav-pills nav-fill nav-justify bg-secondary">
                            <li class="nav-item">
                                <a class="nav-link active" href="#profiletab" data-toggle="tab"
                                    >Profile</a
                                >
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#passwordtab" data-toggle="tab"
                                    >Password</a
                                >
                            </li>
                        </ul>
                        <div id="myTabContent" class="tab-content">
                            <div class="tab-pane active in" id="profiletab">
                                <form id="tab" action="/profile/profileupd" method="post">
                                    <div class="form-group">
                                        <label class="mt-2" for="name">
                                            Display Name:
                                        </label>
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="name"
                                            name="name"
                                            placeholder="Name"
                                            required="required"
                                            value="<%= userdata[0].name %>"
                                        />
                                    </div>
                                    <div class="form-group">
                                        <label class="mt-2" for="email">
                                            Registered Email:
                                        </label>
                                        <input
                                            type="email"
                                            class="form-control"
                                            id="email"
                                            name="email"
                                            placeholder="Email"
                                            readonly
                                            value="<%= userdata[0].email %>"
                                        />
                                    </div>

                                    <div class="form-group">
                                        <label class="mt-2" for="email">
                                            Password:
                                        </label>
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="password"
                                            name="password"
                                            placeholder="Password"
                                            required="required"
                                        />
                                    </div>

                                    <div class="form-group">
                                        <button
                                            type="submit"
                                            class="btn btn-success btn-block login-btn mt-2"
                                        >
                                            Update
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <div class="tab-pane fade" id="passwordtab">
                                <form
                                    id="tab2"
                                    action="/profile/passwordupd"
                                    method="post"
                                    oninput='confirmpassword.setCustomValidity(confirmpassword.value != newpassword.value ? "Passwords do not match." : "");oldpassword.setCustomValidity(newpassword.value == oldpassword.value ? "Old and New password should not be same." : "")'
                                >
                                    <div class="form-group">
                                        <label class="mt-2" for="oldpassword">
                                            Old Password:
                                        </label>
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="oldpassword"
                                            name="oldpassword"
                                            placeholder="Old Password"
                                            required="required"
                                        />
                                    </div>

                                    <div class="form-group mt-3">
                                        <label class="mt-2" for="newpassword">
                                            New Password:
                                        </label>
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="newpassword"
                                            name="newpassword"
                                            placeholder="New Password"
                                            required="required"
                                        />
                                    </div>

                                    <div class="form-group mt-3">
                                        <label class="mt-2" for="confirmpassword">
                                            Confirm Password:
                                        </label>
                                        <input
                                            type="password"
                                            class="form-control"
                                            id="confirmpassword"
                                            name="confirmpassword"
                                            placeholder="Confirm Password"
                                            required="required"
                                        />
                                    </div>

                                    <div class="form-group mt-3">
                                        <button
                                            type="submit"
                                            class="btn btn-success btn-block login-btn"
                                        >
                                            Update
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include ('partials/footer.ejs') %> <%- include ('partials/end.ejs') %>